<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Terminal</title>
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/xterm/css/xterm.css"
        />
        <style>
            body,
            html {
                margin: 0;
                padding: 0;
                width: 100%;
                height: 100%;
                overflow: hidden;
                background-color: black;
            }
            #terminal {
                width: 100%;
                height: 100%;
            }
            .xterm .xterm-viewport {
                background-color: transparent !important;
            }
            .xterm-viewport::-webkit-scrollbar {
                width: 10px;
            }
            .xterm-viewport::-webkit-scrollbar-track {
                background: #111;
                border-left: 1px solid #00ff00;
            }
            .xterm-viewport::-webkit-scrollbar-thumb {
                background: #00ff00;
                box-shadow: 0 0 5px #00ff00;
            }
            .xterm-viewport::-webkit-scrollbar-thumb:hover {
                background: #33ff33;
            }
            .xterm .xterm-selection-layer .xterm-selection {
                background-color: rgba(0, 255, 0, 0.3) !important;
            }
        </style>
    </head>
    <body>
        <div id="terminal"></div>
        <script src="https://cdn.jsdelivr.net/npm/xterm/lib/xterm.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/xterm-addon-fit/lib/xterm-addon-fit.js"></script>
        <script>
            const term = new Terminal({
                fontFamily: "monospace",
                fontSize: 16,
                cursorBlink: true,
                theme: {
                    background: "rgba(0, 0, 0, 0)",
                    foreground: "#00ff00",
                    cursor: "#00ff00",
                },
                allowTransparency: true,
                scrollback: 1000,
            });
            const fitAddon = new FitAddon.FitAddon();
            term.loadAddon(fitAddon);
            term.open(document.getElementById("terminal"));
            fitAddon.fit();
            let currentLine = "";
            const prompt = () => term.write("\r\n> ");
            term.writeln("Welcome to my portfolio!");
            term.writeln('Type "help" for a list of commands.');
            prompt();
            term.onKey(({ key, domEvent }) => {
                if (domEvent.keyCode === 13) {
                    if (currentLine.trim() === "") {
                        prompt();
                        return;
                    }
                    term.writeln("");
                    switch (currentLine.trim().toLowerCase()) {
                        case "help":
                            term.writeln("  about    - Who am I?");
                            term.writeln("  skills   - What can I do?");
                            term.writeln(
                                "  clear    - Clear the terminal screen.",
                            );
                            break;
                        case "about":
                            term.writeln(
                                "  I am a passionate developer creating interactive web experiences!",
                            );
                            break;
                        case "skills":
                            term.writeln(
                                "  React | Three.js | C | WebAssembly | Node.js",
                            );
                            break;
                        case "clear":
                            term.clear();
                            break;
                        default:
                            term.writeln(
                                `  Command not found: ${currentLine.trim()}`,
                            );
                            break;
                    }
                    currentLine = "";
                    prompt();
                } else if (domEvent.keyCode === 8) {
                    if (currentLine.length > 0) {
                        term.write("\b \b");
                        currentLine = currentLine.slice(0, -1);
                    }
                } else if (
                    !domEvent.altKey &&
                    !domEvent.ctrlKey &&
                    !domEvent.metaKey
                ) {
                    currentLine += key;
                    term.write(key);
                }
            });
            window.addEventListener("resize", () => fitAddon.fit());
        </script>
    </body>
</html>
